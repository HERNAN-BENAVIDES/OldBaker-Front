<div class="reset-page">
  <div class="reset-card" role="main" aria-labelledby="reset-title">
    <h2 id="reset-title">Restablecer contraseña</h2>
    <p class="subtitle">Introduce tu nueva contraseña. Debe tener al menos 8 caracteres, una letra mayúscula y un número.</p>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate autocomplete="off" class="reset-form">

      <div class="field">
        <label for="password">Nueva contraseña</label>
        <div class="input-wrap">
          <input id="password" [type]="showPassword ? 'text' : 'password'" formControlName="password" autocomplete="new-password" aria-describedby="passwordHelp" (focus)="onInputFocus()" (blur)="onInputBlur()" />
          <button type="button" class="toggle-eye" (mousedown)="$event.preventDefault()" (click)="toggleShowPassword()" tabindex="0" [attr.aria-pressed]="showPassword" [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M12 5C7 5 2.73 8.11 1 12c1.73 3.89 6 7 11 7s9.27-3.11 11-7c-1.73-3.89-6-7-11-7Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="12" r="3" fill="currentColor"/>
            </svg>
          </button>
        </div>
        <div id="passwordHelp" class="hint">Mínimo 8 caracteres, al menos una mayúscula y un número.</div>
        <div class="error" *ngIf="password?.touched && password?.invalid">
          <div *ngIf="password?.errors?.['required']">La contraseña es obligatoria.</div>
          <div *ngIf="password?.errors?.['minlength']">La contraseña debe tener al menos 8 caracteres.</div>
          <div *ngIf="password?.errors?.['pattern']">La contraseña debe contener al menos una letra mayúscula y un número.</div>
        </div>
      </div>

      <div class="field">
        <label for="confirm">Confirmar contraseña</label>
        <div class="input-wrap">
          <input id="confirm" [type]="showConfirm ? 'text' : 'password'" formControlName="confirm" autocomplete="new-password" (focus)="onInputFocus()" (blur)="onInputBlur()" />
          <button type="button" class="toggle-eye" (mousedown)="$event.preventDefault()" (click)="toggleShowConfirm()" tabindex="0" [attr.aria-pressed]="showConfirm" [attr.aria-label]="showConfirm ? 'Ocultar confirmación' : 'Mostrar confirmación'">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M12 5C7 5 2.73 8.11 1 12c1.73 3.89 6 7 11 7s9.27-3.11 11-7c-1.73-3.89-6-7-11-7Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="12" r="3" fill="currentColor"/>
            </svg>
          </button>
        </div>
        <div class="error" *ngIf="(confirm?.touched || password?.touched) && form?.errors?.['mismatch']">Las contraseñas no coinciden.</div>
      </div>

      <div class="actions">
        <button type="button" class="btn ghost" style="background-color: blue; color: white;" (click)="guardar()">Guardar</button>
        <button type="button" class="btn ghost" style="background-color: red; color: white;"(click)="cancel()">Cancelar</button>
      </div>
    </form>
  </div>
</div>
