<div class="verify-page">
  <div class="verify-card" role="main" aria-labelledby="verify-title">
    <header class="verify-header">
      <div class="icon-circle" aria-hidden="true"></div>
      <div class="header-text">
        <h2 id="verify-title">Recuperar contrase帽a</h2>
        <p class="subtitle">Introduce el c贸digo de 6 d铆gitos que te enviamos por correo</p>
      </div>
    </header>

    <p class="hint">Se envi贸 el c贸digo a: <strong class="email">{{ emailToShow || resetEmail || 'tu correo' }}</strong></p>

    <form [formGroup]="codeForm" (ngSubmit)="onSubmit()" novalidate autocomplete="off">
      <p class="sr-only" aria-hidden="true">C贸digo de recuperaci贸n, 6 d铆gitos</p>

      <div class="otp-wrapper" (paste)="onPaste($event)" aria-label="C贸digo de recuperaci贸n">
        <div *ngFor="let i of indices" class="otp-cell">
          <input #otp
                 class="otp-digit"
                 type="tel"
                 inputmode="numeric"
                 maxlength="1"
                 [attr.aria-label]="'D铆gito ' + (i + 1)"
                 (input)="onInput($event, i)"
                 (keydown)="onKeyDown($event, i)" />
        </div>
      </div>

      <div class="error" *ngIf="codigo?.touched && codigo?.invalid">
        <span *ngIf="codigo?.errors?.['required']">El c贸digo es obligatorio.</span>
        <span *ngIf="codigo?.errors?.['pattern']">El c贸digo debe tener 6 d铆gitos num茅ricos.</span>
      </div>

      <div class="actions">
        <button class="btn primary" type="submit" [disabled]="isLoading">{{ isLoading ? 'Verificando...' : 'Verificar' }}</button>
        <button type="button" class="btn ghost" (click)="router.navigate(['/'])" aria-label="Cancelar">Cancelar</button>
      </div>

      <div class="resend-row">
        <span>驴No recibiste el c贸digo?</span>
        <button type="button" class="link" (click)="resendCode()">Reenviar c贸digo</button>
      </div>
    </form>
  </div>
</div>
