<!-- Notificaciones tipo Toast (esquina superior derecha) -->
<div class="sb-notifications-container">
  <ng-container *ngFor="let n of notifications; trackBy: trackById">
    <!-- Toast para notificaciones normales (success, error, info) -->
    <div *ngIf="n.type !== 'confirm'"
         class="sb-toast"
         [ngClass]="n.type"
         (mouseenter)="pause(n.id)"
         (mouseleave)="resume(n)"
         role="status"
         [attr.aria-live]="n.type === 'error' ? 'assertive' : 'polite'">

      <!-- Ícono -->
      <div class="sb-icon" [ngClass]="n.type" aria-hidden="true">
        <svg *ngIf="n.type === 'success'" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M4 10L8 14L16 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>

        <svg *ngIf="n.type === 'error'" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M5 5L15 15M15 5L5 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>

        <svg *ngIf="n.type === 'info'" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="10" cy="7" r="1" fill="currentColor"/>
          <path d="M10 10V15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>

      <!-- Contenido -->
      <div class="sb-content">
        <p class="sb-message">{{ n.message }}</p>
      </div>

      <!-- Botón cerrar -->
      <button class="sb-close" (click)="dismiss(n.id)" aria-label="Cerrar notificación">
        ×
      </button>

      <!-- Barra de progreso -->
      <div class="sb-progress" *ngIf="(n.timeout ?? 0) > 0">
        <div class="sb-progress-bar" [style.width.%]="progressFor(n.id)"></div>
      </div>
    </div>
  </ng-container>
</div>

<!-- Modal para confirmaciones (centrado) -->
<ng-container *ngFor="let n of notifications; trackBy: trackById">
  <div *ngIf="n.type === 'confirm'"
       class="sb-overlay"
       (mouseenter)="pause(n.id)"
       (mouseleave)="resume(n)"
       role="dialog"
       aria-modal="true"
       [attr.aria-labelledby]="'modal-title-' + n.id">

    <div class="sb-modal">
      <!-- Ícono central -->
      <div class="sb-modal-icon confirm" aria-hidden="true">
        <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M16 8V18" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
          <circle cx="16" cy="24" r="2" fill="currentColor"/>
        </svg>
      </div>

      <!-- Contenido -->
      <div class="sb-modal-content">
        <h3 class="sb-modal-title" [id]="'modal-title-' + n.id">Confirmar acción</h3>
        <p class="sb-modal-message">{{ n.message }}</p>
      </div>

      <!-- Botones -->
      <div class="sb-actions">
        <button class="sb-btn sb-btn-confirm" (click)="confirmAction(n.id)">
          Sí, desactivar
        </button>
        <button class="sb-btn sb-btn-secondary" (click)="cancelAction(n.id)">
          Cancelar
        </button>
      </div>
    </div>
  </div>
</ng-container>
